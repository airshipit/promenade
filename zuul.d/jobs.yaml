---
# Copyright 2018 SUSE LINUX GmbH.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

- job:
    name: airship-promenade-openstack-tox-cover-noble
    parent: openstack-tox-cover
    description: Runs cover job on noble
    nodeset: airship-promenade-single-node-noble
    pre-run: tools/zuul/playbooks/install-deps.yaml

- job:
    name: airship-promenade-openstack-tox-py312-noble
    parent: openstack-tox-py312
    description: Runs cover job on noble
    nodeset: airship-promenade-single-node-noble
    pre-run: tools/zuul/playbooks/install-deps.yaml

- job:
    name: airship-promenade-openstack-tox-pep8-noble
    parent: openstack-tox-pep8
    description: Runs pep8 job on noble
    nodeset: airship-promenade-single-node-noble

- job:
    name: airship-promenade-genesis-containerd-gate
    # need to switch to tigera operator
    voting: false
    description: |
      Deploy airship promenade genesis with containerd
    run:
      - tools/zuul/playbooks/deploy-promenade-containerd.yaml
    required-projects:
      - openstack/openstack-helm
    timeout: 9600
    nodeset: airship-promenade-single-node-noble
    vars:
      distro: ubuntu_noble

- job:
    name: airship-promenade-chart-build-gate
    description: |
      Lints charts using pinned HTK
    run: tools/zuul/playbooks/helm-linter.yaml
    timeout: 900
    nodeset: airship-promenade-single-node-noble
    vars:
      HTK_COMMIT: c1be7b83ff530b2aa39bb81e9ac35f8155266123

- job:
    name: airship-promenade-chart-build-gate-latest-htk
    description: |
      Lints charts using latest HTK
    run: tools/zuul/playbooks/helm-linter.yaml
    timeout: 900
    nodeset: airship-promenade-single-node-noble
    vars:
      HTK_COMMIT: master

- job:
    name: airship-promenade-chart-build-latest-htk
    description: |
      Lints charts using latest HTK
    voting: true
    run: tools/zuul/playbooks/helm-linter.yaml
    timeout: 900
    nodeset: airship-promenade-single-node-noble
    vars:
      HTK_COMMIT: master

- job:
    name: airship-promenade-docker-build-gate-ubuntu_noble
    voting: true
    run: tools/zuul/playbooks/docker-image-build.yaml
    timeout: 3600
    nodeset: airship-promenade-single-node-noble
    vars:
      publish: false
      distro: ubuntu_noble
      tags:
        dynamic:
          patch_set: true
    irrelevant-files:
      - ^charts/.*$
      - ^etc/.*$
      - ^tests/.*$
      - ^tools/.*$

- job:
    name: airship-promenade-docker-publish_ubuntu_noble
    voting: true
    run: tools/zuul/playbooks/docker-image-build.yaml
    timeout: 3600
    nodeset: airship-promenade-single-node-noble
    secrets:
      - airship_promenade_quay_creds_2026
    vars:
      publish: true
      distro: ubuntu_noble
      tags:
        dynamic:
          branch: true
          commit: true
        static:
          - latest
          - airflow_3.1.5
    irrelevant-files:
      - ^charts/.*$
      - ^etc/.*$
      - ^tests/.*$
      - ^tools/.*$

- secret:
    name: airship_promenade_quay_creds_2026
    data:
      username: !encrypted/pkcs1-oaep
        - dpmGcLTG7LklbZNY/WRy43emkyfzjlyVEsRRwJJnSzT7Bif7QyEWt0htX2xbPDsw3AN/d
          pTS187/0TVwCmnFPIRvf1c0GWcZzqe7eFgJLUdezvCR8XxnH6QacGZggPj5czmD10b1Eb
          Um6r80+alsCEpStgniYN2JlNgz7DnoxsI9C1qLyWDuRHvHLk1ji+gKzvKbSy8nxSHL2Xq
          Mn8Ok6A6rfNH4dQRbxzDvh5vLd7q1fInyYQewiixNZiHV8mG8lNFY3QuKtFRsho6GaC2W
          ZU2VHLTQHscTrwbTWvbNAARY/+Wg3FXl27qx0GgNtDCdNndCd3x6EemlizbBwDmxVRCuf
          bnIcfp+CnYnyaqvmX8a061/TCTmbF/gra55WzMZQnLVKZO1egm7VMiwbVJzxzIhkfsa81
          WrdJXuSCSJdyCKlNmEnmznhzLNjIGOv2C7QZCYJWFqKzmW+7xU5q3isr4LZlSIEHjTR8m
          FS40tsxr1j63AbnXxo4NWjpi3mXr3bysP+MtMzjQZ5X4ra36lIBrAS26Ui1xxIm6o1rvg
          gIJaW1JzO5rMEEH23Nt47ZTgSQmkbJhvozBni3qUGkVWeA02r9cAoDFFWyg6idiLXfGxe
          +1fEc2sKWtHqfuuY5WTFOcC4YSj57JSQfiDBjb2DU9qnGRnXIiPfbj9MZmXDCg=
      password: !encrypted/pkcs1-oaep
        - OTtTVIyPPDd5VJWI/lMoqvWU/R4TuPhSyAQSI7zKzgqWHN9r+17vNkPfoV6xC7iUibQiu
          iLSq7ib/XdxotxH7TAtFyq5wtxTUfSgGbVVK6uFPPT3lyUckMPxCbDt6VYfv7KvnqX7Zl
          143gTG2NMVVfuBzuhocVuwJ4OToIBwAfcmIYUs0nEDtuziePr+QiCfwMHWqPI18zzQVqn
          7DOJtezfvucMpuJYp1ie4KKse/IkmEsOwa87vfcmPbFry4rdeSLnlVVziwu1NuVBcK0j2
          uU0ufKwWy5x0TYWuoc5yAgOeNmM4Kt49WMY22JChxFZ1EvSYNUr34Dod/gvtO/fNDx4Dp
          QThYTFJSO2wdkQ+JuAYuNepB7W7q8C7oUKbthwq8/aLdRseJ3aE4JNBXD2KZHHS0ntJpr
          QwCwUbvyKigATOF94ZE/jGRAwYxTB44VFvKzst+xQpnxko9jnw698A/oN8odWXrRUd2lQ
          gEppMXqxqnRmyIbiffmvMf4Potl3cxptRVs/aHzIC7ejTEsoiTo2BpoEMVJoDGfMp6Rgc
          /fmv00QQgmUbNeG3+UqgkDu1+h+K2Co674Pca8xfv681IcXoa9DSKI67eHibRhYCIIgz1
          cgr9ck9SJj087+2NHDibydpL9uu6SX5kHC/8rIvNiveVDf8sUw3KMbTW6UceSU=


- job:
    name: promenade-upload-git-mirror
    parent: upload-git-mirror
    description: Mirrors airship/promenade to airshipit/promenade
    vars:
      git_mirror_repository: airshipit/promenade
    secrets:
      - name: git_mirror_credentials
        secret: promenade-airshipit-github-ed25519-secret-2026-01-13
        pass-to-parent: true

- secret:
    name: promenade-airshipit-github-ed25519-secret-2026-01-13
    data:
      user: git
      host: github.com
      host_key: github.com ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOMqqnkVzrm0SdG6UOoqKLsabgH5C9okWi0dh2l9GKJl
      ssh_key: !encrypted/pkcs1-oaep
        - t78GL8CXLeXWwpKjmGXqllMagjky85BI94OlbVlg34IC4Qj43Q9MYw4Q1HEdAceXb8hhf
          zGx+aJ4FPX4B7/WJuYbUE6xQ2OTSRrEttDHuWMPR8szTQ9gaX1EPyiZhyUWUBnJC+R9y1
          t7U6TQDTAfk22ckXZDXcuU/xFLG8S6qMUoEao5VuaJfqEdhnRpmi25Tpskib3VYeJx7iE
          D6+iFoU/AY+gbTXwkfgA+XetHELEJknhV2hn3Nyc03/a8ODFT3bJYYfSZlB9CBycjcwoX
          Q51M7PCFFhGpSmAm+WyNKakiKGJJSZpTB6CqwSMvNx4szNfyaoipN8BPjA9V3FEQNwR/L
          kwSsD+7FnMNPvHvL5AWvavDR7k6mDB5ldlTKI2bzpzOQuSBAmTFNDPlpzbsZApbJU7jLS
          1pDR16YOcvjs1qeVVx/XWAflqx7nz424pKc5WzZ4zQvC0PBk1xoJyi4//F/FOdBfP59Qb
          WP1yaMJMq8Pa3Z6Yo5rVZdkPAbkn1Tn80ql9ynDKQBBRU6RST5ksK8vq3mqdUsEGh3xw4
          hX9RFH0YRLu4asQzkPFYHhLM2OPcGv8l81O9xWq1p63kbeIodES3eKdurXGpJS6qhBYyL
          zHp1LjP4aNJfSz0UYI4Xc2hECK6Cwmivzlrg8p+n/sbpjZar7mlENojM0vMhw8=
